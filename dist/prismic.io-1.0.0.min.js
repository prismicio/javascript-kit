/*! prismic.io 1.0.0 2013-09-27 */
!function(a){"use strict";function b(a,b,c,d,e,f){this.name=a,this.fields=b,this.form_method=c,this.rel=d,this.enctype=e,this.action=f}function c(a,b,c){if(this.api=a,this.form=b,this.data=c||{},b.fields&&b.fields.q)for(var d in b.fields){var e=this.data[d];e||(this.data[d]=[]),"q"===d?this.query(b.fields[d].default):this.data[d].push(b.fields[d].default)}}function d(a,b,c){this.ref=a,this.label=b,this.isMaster=c}var e=function(a,b){var c=new e.fn.init(a);return b&&c.get(b),c};e.fn=e.prototype={constructor:e,data:null,get:function(a){var b=this;$.ajax({dataType:"json",url:this.url,success:function(c){b.data=b.parse(c),a&&a(b,this)}})},parse:function(a){var e,f,g,h,i,j={};for(i in a.forms)a.forms.hasOwnProperty(i)&&(h=a.forms[i],g=new b(h.name,h.fields,h.form_method,h.rel,h.enctype,h.action),j[i]=new c(this,g,{}));if(e=a.refs.map(function(a){return new d(a.ref,a.label,a.isMasterRef)})||[],f=e.filter(function(a){return a.isMaster===!0}),0===f.length)throw"No master ref.";return{bookmarks:a.bookmarks||[],refs:e,forms:j,master:f[0],oauthInitiate:a.oauth_initiate,oauthToken:a.oauth_token}},init:function(a){return this.url=a,this},forms:function(a){return this.data.forms[a]},master:function(){return this.data.master.ref},bookmarks:function(){return this.data.bookmarks}},e.fn.init.prototype=e.fn,b.prototype={},c.prototype={ref:function(a){return this.data.ref=a,this},query:function(a){function b(a){return null==a?"":0===a.indexOf("[")&&a.lastIndexOf("]")===a.length-1?a.substring(1,a.length-1):a}return this.data.q=this.data.q||[],this.data.q.push(b(a)),this},submit:function(a){var b="["+this.data.q.join("")+"]",c=this.data.ref,d={ref:c};1===this.data.q.length&&""===this.data.q[0]||(d.q=b),$.getJSON(this.form.action,d,function(b){var c=b.map(function(a){var b={};for(var c in a.data[a.type])b[a.type+"."+c]=a.data[a.type][c];return new Doc(a.id,a.type,a.href,a.tags,a.slugs,b)});a&&c.length&&a(c)})}},function(){function b(a){return this.fragments&&this.fragments[a]?Array.isArray(this.fragments[a])?this.fragments[a]:[this.fragments[a]]:[]}function c(a,b,c,d,e,f){this.id=a,this.type=b,this.href=c,this.tags=d,this.slug=e?e[0]:"-",this.fragments=f}c.prototype={get:function(a){var c=b.call(this,a);return c.length?Prismic.Fragments.initField(c[0]):null},getAll:function(a){return b.call(this,a).map(function(a){return Prismic.Fragments.initField(a)},this)},getImage:function(a){var b=this.get(a);return b instanceof Prismic.Fragments.Image?b:b instanceof Prismic.Fragments.StructuredText?b:null},getAllImages:function(a){var b=this.getAll(a);return b.map(function(a){if(a instanceof Prismic.Fragments.Image)return a;if(a instanceof Prismic.Fragments.StructuredText)throw new Error("Not done.");return null})},getImageView:function(a,b){var c=this.get(a);if(c instanceof Prismic.Fragments.Image)return c.getView(b);if(c instanceof Prismic.Fragments.StructuredText)throw new Error("Not done.");return null},getAllImageViews:function(a,b){return this.getAllImages(a).map(function(a){return a.getView(b)})},getText:function(a){var b=this.get(a);return b instanceof Prismic.Fragments.StructuredText?b.blocks.map(function(a){return a.text}).join("\n"):void 0},getNumber:function(a){var b=this.get(a);return b instanceof Prismic.Fragments.Number?b.value:void 0},asHtml:function(a){var b=[];for(var c in this.fragments){var d=this.get(c);b.push(d&&d.asHtml?'<section data-field="'+c+'">'+d.asHtml(a)+"</section>":"")}return b.join("")}},a.Doc=c}(),d.prototype={},"object"==typeof a&&"object"==typeof a.document&&(a.Prismic={Api:e})}(window),function(a){"use strict";function b(a){this.value=a}function c(a){this.value=a}function d(a){this.value=a}function e(a){this.value=a}function f(a){this.value=new Date(a)}function g(a){this.value=a}function h(a,b){this.main=a,this.views=b||{}}function i(a,b,c){this.url=a,this.width=b,this.height=c}function j(a,b){this.tag=a,this.blocks=b}function k(a){this.blocks=a}function l(){}function m(){}function n(a,b,c){this.text=a,this.spans=b,this.level=c}function o(){}function p(a){this.view=a}function q(){}function r(a,b){this.start=a,this.end=b}function s(a,b){this.start=a,this.end=b}function t(a,b,c){this.start=a,this.end=b,this.link=c}function u(a){var b,c=[],d=[];return Array.isArray(a)?(a.forEach(function(a){c.length>0?(c[c.length-1],b=new j(null,[]),b.blocks.push(a),c.push(b)):(b=new j(null,[]),b.blocks.push(a),c.push(b))}),c.forEach(function(a){a.tag?(d.push("<"+a.tag+">"),a.blocks.forEach(function(a){d.push(u(a))}),d.push("</"+a.tag+">")):a.blocks.forEach(function(a){d.push(u(a))})})):("heading1"==a.type&&d.push("<h1>"+a.text+"</h1>"),"heading2"==a.type&&d.push("<h2>"+a.text+"</h2>"),"heading3"==a.type&&d.push("<h3>"+a.text+"</h3>"),"paragraph"==a.type&&d.push("<p>"+a.text+"</p>"),"image"==a.type&&d.push('<p><img src="'+a.url+'"></p>')),d.join("")}function v(a){var g,j;switch(a.type){case"Color":g=new d(a.value);break;case"Number":g=new e(a.value);break;case"Date":g=new f(a.value);break;case"Text":g=new b(a.value);break;case"Embed":throw new Error("not implemented");case"Select":g=new c(a.value);break;case"Image":var j=a.value.main;g=new h(new i(j.url,j.dimensions.width,j.dimensions.height),a.value.views);break;case"StructuredText":g=new k(a.value);break;case"Link.Document":throw new Error("not implemented");case"Link.Web":throw new Error("not implemented");default:console.log("Type not found:",a.type)}return g}b.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},c.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},d.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},e.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},f.prototype={asText:function(){throw new Error("not implemented")},asHtml:function(){return"<time>"+this.value+"</time>"}},g.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},h.prototype={getView:function(a){return"main"===a?this.main:this.views[a]},asHtml:function(){return this.main.asHtml()}},i.prototype={ratio:function(){return this.width/this.height},asHtml:function(){return"<img src="+this.url+" width="+this.width+" height="+this.height+">"}},k.prototype={getTitle:function(){},getFirstParagraph:function(){},getFirstImage:function(){},asHtml:function(){return u.call(this,this.blocks)}},b.prototype=new l,n.prototype=new m,o.prototype=new m,o.prototype=new m,p.prototype=new l,r.prototype=new q,s.prototype=new q,t.prototype=new q,a.Fragments={Image:h,ImageView:i,Text:b,Number:e,Date:f,Select:c,Color:d,StructuredText:k,initField:v}}(window.Prismic);